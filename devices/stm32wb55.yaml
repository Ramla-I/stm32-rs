_svd: ../svd/stm32wb55.svd

_modify:
  name: STM32WB55
  ADC:
    # Consistent naming across families
    name: ADC1
  SYSCFG_VREFBUF:
    name: SYSCFG
    groupName: SYSCFG
  AES?:
    groupName: AES

# Rename the L3 field to L to match RM0434
ADC1:
  SQR1:
    _modify:
      L3:
        name: L
        description: Regular channel sequence length
  _delete:
    - CCR # this is part of the ADC_Common block.

ADC?:
  _include:
    - patches/adc/split.yaml
    - patches/adc/l4+.yaml
    - fields/adc/adc_v3.yaml
    - fields/adc/adc_v3_l4.yaml
    - collect/adc/v3.yaml
  DR:
    _modify:
      RDATA_0_6:
        bitWidth: 7
    _merge:
      RDATA: RDATA*
  SQR?:
    SQ*: [0, 18]

AES?:
  _include:
    - patches/aes/fields.yaml
    - fields/aes/v2.yaml

EXTI:
  _modify:
    C1IMR1:
      name: IMR1
    C1EMR1:
      name: EMR1
    C1IMR2:
      name: IMR2
    C1EMR2:
      name: EMR2

    _interrupts:
      EXTI10_15:
        name: EXTI15_10
      EXTI5_9:
        name: EXTI9_5

  RTSR1:
    _modify:
      RT_31:
        name: RT31
    _split: [RT]

  FTSR1:
    _modify:
      FT_31:
        name: FT31
    _split: [FT]

  SWIER1:
    _modify:
      SWI_31:
        name: SWI31
    _split: [SWI]

  PR1:
    _modify:
      PIF_31:
        name: PIF31
    _split: [PIF]

  IMR1:
    _split: [IM]
  IMR2:
    _split: [IM]
  C2IMR1:
    _split: [IM]
  C2IMR2:
    _split: [IM]

HSEM:
  _modify:
    C1IER0:
      name: C1IER
    C2IER0:
      name: C2IER

IPCC:
  _modify:
    C1TO2SR:
      name: C1TOC2SR

IWDG:
  _include: patches/16bit.yaml

LCD:
  _delete: RAM_COM*
  _include:
    - patches/lcd/ram_segment_40.yaml

QUADSPI:
  _include:
    - patches/quadspi/dr_multi_access.yaml
    - fields/quadspi/quadspi_v1_single_flash.yaml

RCC:
  _include:
    - fields/rcc/rcc_wb.yaml
    - fields/rcc/rcc_wx_c2.yaml

SAI1:
  _delete:
    - GCR

SPI?:
  _include:
    - patches/16bit.yaml
    - patches/spi/dr8.yaml

SYSCFG:
  _strip: SYSCFG_
  _include: fields/syscfg/syscfg_wb55.yaml
  _modify:
    IMR1:
      addressOffset: 0x100
    IMR2:
      addressOffset: 0x104
    C2IMR1:
      addressOffset: 0x108
    C2IMR2:
      addressOffset: 0x10c
    SIPCR:
      addressOffset: 0x110

TIM1:
  _include: patches/tim/v2/oc5m_bit3.yaml

TIM2:
  _include: patches/tim/tim2_common_32bit.yaml
  CNT:
    _add:
      UIFREMAP_CNT:
        description: Counter value when CR1.UIFREMAP=1
        bitOffset: 0
        bitWidth: 31
    _modify:
      UIFCPY:
        description: Copy of ISR.UIF when CR1.UIFREMAP=1
      CNT_H:
        bitWidth: 16
        bitOffset: 16
      CNT_L:
        bitOffset: 0

"TIM[12-58],TIM19,TIM20":
  _include: fields/tim/v2/ccm_extended.yaml

"TIM1[013467]":
  _include: fields/tim/v2/ccm_common.yaml

WWDG:
  _include: patches/16bit.yaml

_include:
  - collect/dma/dmamux.yaml
  - patches/rtc/alarm.yaml
  - patches/rtc/rtc_cr.yaml
  - collect/rtc/alarm.yaml
  - collect/rtc/bkpr.yaml
  - patches/sai/sai_v1.yaml
  - fields/sai/sai.yaml
  - collect/sai/ch.yaml
  - collect/sai/pdm.yaml
  - patches/adc/wb_adc_common.yaml
  - collect/hsem/r.yaml
  - fields/i2c/i2c_v2.yaml
  - fields/spi/spi_v2_no_I2S.yaml
