# Common SVD errors for high memory density parts h7a3/h7b3/h7b0
#
# See RM0455

# Rename in accordance with other devices and reference manual.
_modify:
  Flash:
    name: FLASH
  TT_FDCAN:
    name: FDCAN1
  FDCAN:
    name: FDCAN2
  DAC:
    name: DAC1

# The ADC3 interrupt doesn't exist (no ADC3 peripheral), but the slot was
# re-used for DAC2
ADC1:
  _delete:
    _interrupts:
      - ADC3

AXI:
  _strip: AXI_

# Work around the DMA_STR? interrupt mess in the SVD.
# Some interrupts are on DMA2 instead on DMA1 and/or called DMA_STR? without
# the numeral.
#
# Since it is not possible to modify a derivedFrom peripheral, we delete it first

_delete:
  - UART4
  - UART5
  - UART7
  - UART8
  - USART9
  - USART10

_add:
  UART4:
    derivedFrom: USART1
    baseAddress: 0x40004C00
    interrupts:
      UART4:
        description: UART4 global interrupt
        value: 52
  UART5:
    derivedFrom: USART1
    baseAddress: 0x40005000
    interrupts:
      UART5:
        description: UART5 global interrupt
        value: 53
  UART7:
    derivedFrom: USART1
    baseAddress: 0x40007800
    interrupts:
      UART7:
        description: UART7 global interrupt
        value: 82
  UART8:
    derivedFrom: USART1
    baseAddress: 0x40007C00
    interrupts:
      UART8:
        description: UART8 global interrupt
        value: 83
  UART9:
    derivedFrom: USART1
    baseAddress: 0x40011800
    interrupts:
      UART9:
        description: UART9 global interrupt
        value: 140
  USART10:
    derivedFrom: USART1
    baseAddress: 0x40011C00
    interrupts:
      USART10:
        description: USART10 global interrupt
        value: 141

DMA2:
  _add:
    _interrupts:
      DMA2_STR0:
        value: 56
        description: DMA2 Stream0
      DMA2_STR1:
        value: 57
        description: DMA2 Stream1
      DMA2_STR2:
        value: 58
        description: DMA2 Stream2
      DMA2_STR3:
        value: 59
        description: DMA2 Stream3
      DMA2_STR4:
        value: 60
        description: DMA2 Stream4
      DMA2_STR5:
        value: 68
        description: DMA2 Stream5
      DMA2_STR6:
        value: 69
        description: DMA2 Stream6
      DMA2_STR7:
        value: 70
        description: DMA2 Stream7

SYSCFG:
  _modify:
    SYSCFG_BRK_LOCKUPR:
      name: CFGR
      addressOffset: 0x18
  PMCR:
    _delete: # Functionality not available on these parts
      - BOOSTE
      - EPIS

HRTIM_Common:
  _modify:
    BDMADR:
      addressOffset: 0x70

HRTIM_TIMA:
  _delete:
    _interrupts: DMA2_*

BDMA?:
  _strip: BDMA_

CEC:
  _strip: CEC_

CRS:
  _strip: CRS_

DAC1:
  _strip: DAC_

DMA2D:
  _strip: DMA2D_

FMC:
  _strip: FMC_

JPEG:
  _strip: JPEG_

HSEM:
  _strip: HSEM_

MDMA:
  _strip: MDMA_

LPTIM?:
  _strip: LPTIM_

MDIOS:
  _strip: MDIOS_

PWR:
  _strip: PWR_
  _delete:
    _interrupts: WWDG1_RST # Doesn't exist at all on these parts

RAMECC:
  _add:
    _interrupts:
      RAMECC:
        description: ECC diagnostic global interrupt
        value: 145

RTC:
  _strip: RTC_

RNG:
  _strip: RNG_

I2C3:
  _strip: I2C_

SDMMC?:
  _strip: SDMMC_

VREFBUF:
  _strip: VREFBUF_

OTG?_HS_*:
  _strip: OTG_HS_

FDCAN?:
  _strip: FDCAN_

WWDG:
  _strip: WWDG_
IWDG:
  _strip: IWDG_
